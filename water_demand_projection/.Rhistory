source('~/documents/research/code/lro/water_demand/WaterDemandModel.R')
source('~/documents/research/code/lro/water_demand/yearly_demand_prediction.R')
source('~/documents/research/code/lro/water_demand/yearly_demand_prediction.R')
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
qplot(x=Year, y=value, data=long.proj, color=variable)
long.proj <- melt(projected.demand, id.vars=c('Year'))
qplot(x=Year, y=value, data=long.proj, color=variable)
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
source('~/documents/research/code/lro/water_demand/yearly_demand_prediction.R')
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
long.proj <- melt(projected.demand, id.vars=c('Year'))
qplot(x=Year, y=value, data=long.proj, color=variable)
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
long.proj <- melt(projected.demand, id.vars=c('Year'))
qplot(x=Year, y=value, data=long.proj, color=variable)
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
long.proj <- melt(projected.demand, id.vars=c('Year'))
qplot(x=Year, y=value, data=long.proj, color=variable)
precip <- monthly.pr[[grid.type]][ , c('Year', 'Month', model.selection)]
source('~/documents/research/code/lro/water_demand/WaterDemandModel.R')
source('~/documents/research/code/lro/water_demand/WaterDemandModel.R')
datepaste <- function(array)
{
return( paste( paste(array, sep='', collapse='-'), '-1', sep='' ) )
}
datepaste(Demand[ , c('Year','Month')])
datepaste(demand[ , c('Year','Month')])
apply(demand[ , c('Year','Month')], 1, datepaste)
demand$Date <- as.Date(apply(demand[ , c('Year','Month')], 1, datepaste))
str(demand)
qplot(x=Date, y=GPCD, data=demand)
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
long.proj <- melt(projected.demand, id.vars=c('Year'))
qplot(x=Year, y=value, data=long.proj, color=variable)
long.proj <- melt(projected.demand, id.vars=c('Year'), value.name='Temperature')
qplot(x=Year, y=Temperature, data=long.proj, color=variable)
long.proj <- melt(projected.demand, id.vars=c('Year'), value.name='Temperature', variable.name='Data.Source')
qplot(x=Year, y=Temperature, data=long.proj, color=Data.Source)
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
source('~/documents/research/code/lro/water_demand/yearly_demand_prediction.R')
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
qplot(x=Year, y=Temperature, data=long.proj, color=Data.Source)
long.proj <- melt(projected.demand, id.vars=c('Year'), value.name='Temperature', variable.name='Data.Source')
qplot(x=Year, y=Temperature, data=long.proj, color=Data.Source)
levels(long.proj$Data.Source)
levels(long.proj$Data.Source) = c('Fitted','Observed')
qplot(x=Year, y=Temperature, data=long.proj, color=Data.Source)
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand$true <- yearly.demand$Demand * 1e6 / yearly.demand$Population / sum(days.per.month)
long.proj <- melt(projected.demand, id.vars=c('Year'), value.name='Temperature', variable.name='Data.Source')
levels(long.proj$Data.Source) = c('Fitted','Observed')
qplot(x=Year, y=Temperature, data=long.proj, color=Data.Source)
source('~/documents/research/code/lro/water_demand/WaterDemandModel.R')
help(recast)
source('WaterDemandModel.R')
source('load_tasmax.R')
source('load_pr.R')
source('model_selection.R')
projection = list()
projection$tasmax <- demand[ , c('Year', 'Month', 'avg.max.temp.c')]
projection$pr <- demand[ , c('Year', 'Month', 'rain.rate.mm')]
projection
source('WaterDemandModel.R')
mean(demand)
mean(demand$avg.max.temp.c)
mean(demand$rain.rate.mm)
data.frame(Year=2040, avg.max.temp.c=29, rain.rate.mm=0.75)
predict <- data.frame(Year=2040, avg.max.temp.c=29, rain.rate.mm=0.75)
source('~/documents/research/code/lro/water_demand/WaterDemandModel.R')
pred.point <- data.frame(Year=2040, avg.max.temp.c=29, rain.rate.mm=0.75)
predict(gpcd.lm, pred.point)
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
str(projection$tasmax)
projected.demand <- Projected.Yearly.GPCD(projection, names(projection)[3])
projected.demand <- Projected.Yearly.GPCD(projection, names(projection$tasxmax)[3])
names(projection$tasxmax)
projection = list()
#projection$tasmax <- monthly.tmax[[grid.type]][ , c('Year', 'Month', model.selection)]
#projection <- monthly.tmax[[grid.type]][ , c('Year', 'Month', model.selection)]
projection$tasmax <- demand[ , c('Year', 'Month', 'avg.max.temp.c')]
projection$pr <- demand[ , c('Year', 'Month', 'rain.rate.mm')]
names(projection$tasxmax)
projection$tasmax
names(projection$tasmax)
names(projection$tasmax)
projected.demand <- Projected.Yearly.GPCD(projection, names(projection$tasmax)[3])
projected.demand
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
max(demand$Year, 2000)
pmax(demand$Year, 2000)
demand <- within(demand,
{
GPCD <- Demand / Population * 1e6 / rep(days.per.month, nrow(demand)/12) # Gallons Per Capita per Day
rain.rate.mm <- Rain. * 25.4 / rep(days.per.month, nrow(demand)/12) # Convert to mm/day
avg.max.temp.c <- (AveMaxTemp - 32)*5/9 # Convert to celsius
Year <- pmax(Year, 2000)
})
demand$Year
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
source('~/documents/research/code/lro/water_demand/compare_models.R')
source('~/.active-rstudio-document')
source('~/documents/research/code/lro/water_demand/compare_models.R')
cm
cm <- common.models[1]
common.models
names(yearly.tmax[[data.type]])
names(yearly.maxtmax[[data.type]])
yearly.maxtmax
source('~/documents/research/code/lro/water_demand/compare_models.R')
source('~/documents/research/code/lro/water_demand/plot_temp_projections.R')
source('~/.active-rstudio-document')
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
projected.demand
help(write.csv)
dir()
write.csv(projected.demand, file='/tmp/projected_demand.csv', row.names=FALSE)
row.names(projected.demand)
row.names(projected.demand) <- projected.demand$Year
projected.demand
source('~/documents/research/code/lro/water_demand/create_gpcd.R')
write.csv(projected.demand, file='/tmp/projected_demand.csv', row.names=FALSE)
write.csv(projected.demand, file='/tmp/projected_demand.csv', row.names=FALSE, quote=FALSE)
